



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A hands-on workshop to learn about a variety of AWS identity topics.">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/aws-favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.2">
    
    
      
        <title>構築フェーズ - Identity Round Robin</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.982221ab.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../stylesheets/custom.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <!--
  Copyright (c) 2016-2018 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Application header -->
<header class="md-header" data-md-component="header">

    <!-- Top-level navigation -->
    <nav class="md-header-nav md-grid">
      <div class="md-flex">
  
        <!-- Link to home -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://aws.amazon.com/"
              title="Amazon Web Services"
              class="md-header-nav__button md-logo">
            
              <img src="../../assets/images/aws_smile_logo.png" width="40" height="24" />
            
          </a>
        </div>
  
        <!-- Button to toggle drawer -->
        <div class="md-flex__cell md-flex__cell--shrink">
          <label class="md-icon md-icon--menu md-header-nav__button"
              for="__drawer"></label>
        </div>
  
        <!-- Header title -->
        <div class="md-flex__cell md-flex__cell--stretch">
          <div class="md-flex__ellipsis md-header-nav__title"
              data-md-component="title">
            
              
                <span class="md-header-nav__topic">
                  Identity Round Robin
                </span>
                <span class="md-header-nav__topic">
                  構築フェーズ
                </span>
              
            
          </div>
        </div>
  
        <!-- Button to open search dialogue -->
        <div class="md-flex__cell md-flex__cell--shrink">
          
            
              <label class="md-icon md-icon--search md-header-nav__button"
                  for="__search"></label>
  
              <!-- Search interface -->
              
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
            
          
        </div>
        <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-flex__ellipsis md-header-nav__lang">
                <div class="md-lang-drop">
                    <button onclick="window.location.href='https://awssecworkshops.com/'" class="md-lang-dropbtn fa fa-home"></button>
                    <!--
                    <div id="mdDropMenu" class="md-dropdown-content">
                        <a href="#">JP</a>
                    </div>
                    -->
                </div>
            </div>
        </div>
  
        <!-- Repository containing source -->
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  

<a href="https://github.com/skiritan/aws-identity-round-robin-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
     skiritan/aws-identity-round-robin-workshop
  </div>
</a>
            </div>
          </div>
        
      </div>
    </nav>
  </header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="概要" class="md-tabs__link">
        概要
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../serverless/" title="サーバレスアイデンティティ" class="md-tabs__link">
          サーバレスアイデンティティ
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../delegation/" title="アクセス委任" class="md-tabs__link">
          アクセス委任
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="パーミッションバウンダリー" class="md-tabs__link md-tabs__link--active">
          パーミッションバウンダリー
        </a>
      
    </li>
  

      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <!--
  Copyright (c) 2016-2019 Martin Donath <martin.donath@squidfunk.com>
  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Main navigation -->
<nav class="md-nav md-nav--primary" data-md-level="0">

  <!-- Site title -->
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.."
        title="Identity Round Robin" class="md-nav__button md-logo">
      
        <img src="../../assets/images/aws_smile_logo.png" width="48" height="48" />
      
    </a>
    Identity Round Robin
  </label>

  <!-- Repository containing source -->
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/skiritan/aws-identity-round-robin-workshop/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
     skiritan/aws-identity-round-robin-workshop
  </div>
</a>
    </div>
  

  <!-- Render item list -->
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="概要" class="md-nav__link">
      概要
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      サーバレスアイデンティティ
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        サーバレスアイデンティティ
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../serverless/" title="シナリオ" class="md-nav__link">
      シナリオ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../serverless/task1/" title="タスク１" class="md-nav__link">
      タスク１
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../serverless/task2/" title="タスク２" class="md-nav__link">
      タスク２
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      アクセス委任
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        アクセス委任
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../delegation/" title="シナリオ" class="md-nav__link">
      シナリオ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../delegation/build/" title="構築フェーズ" class="md-nav__link">
      構築フェーズ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../delegation/verify/" title="検証フェーズ" class="md-nav__link">
      検証フェーズ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      パーミッションバウンダリー
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        パーミッションバウンダリー
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="シナリオ" class="md-nav__link">
      シナリオ
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        構築フェーズ
      </label>
    
    <a href="./" title="構築フェーズ" class="md-nav__link md-nav__link--active">
      構築フェーズ
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" title="設定手順" class="md-nav__link">
    設定手順
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-iam-lambda-iam-iam" title="タスク１ マネージドポリシー、IAM ロール、および Lambda 機能を作成する権限を持つ IAM ユーザー、IAM ポリシーを作成する" class="md-nav__link">
    タスク１ マネージドポリシー、IAM ロール、および Lambda 機能を作成する権限を持つ IAM ユーザー、IAM ポリシーを作成する
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="ウォークスルー" class="md-nav__link">
    ウォークスルー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" title="タスク２ パーミッションバウンダリーを作成する" class="md-nav__link">
    タスク２ パーミッションバウンダリーを作成する
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" title="ウォークスルー  :" class="md-nav__link">
    ウォークスルー  :
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-web" title="タスク３ Web 管理者向けのアクセス権のポリシーを更新して、パーミッションバウンダリーを組み込む" class="md-nav__link">
    タスク３ Web 管理者向けのアクセス権のポリシーを更新して、パーミッションバウンダリーを組み込む
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" title="ウォークスルー" class="md-nav__link">
    ウォークスルー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" title="タスク４          検証フェーズに必要な情報を収集する" class="md-nav__link">
    タスク４          検証フェーズに必要な情報を収集する
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" title="ウォークスルー" class="md-nav__link">
    ウォークスルー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../verify/" title="検証フェーズ" class="md-nav__link">
      検証フェーズ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../contribute/" title="コントリビュート" class="md-nav__link">
      コントリビュート
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" title="設定手順" class="md-nav__link">
    設定手順
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-iam-lambda-iam-iam" title="タスク１ マネージドポリシー、IAM ロール、および Lambda 機能を作成する権限を持つ IAM ユーザー、IAM ポリシーを作成する" class="md-nav__link">
    タスク１ マネージドポリシー、IAM ロール、および Lambda 機能を作成する権限を持つ IAM ユーザー、IAM ポリシーを作成する
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="ウォークスルー" class="md-nav__link">
    ウォークスルー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" title="タスク２ パーミッションバウンダリーを作成する" class="md-nav__link">
    タスク２ パーミッションバウンダリーを作成する
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" title="ウォークスルー  :" class="md-nav__link">
    ウォークスルー  :
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-web" title="タスク３ Web 管理者向けのアクセス権のポリシーを更新して、パーミッションバウンダリーを組み込む" class="md-nav__link">
    タスク３ Web 管理者向けのアクセス権のポリシーを更新して、パーミッションバウンダリーを組み込む
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" title="ウォークスルー" class="md-nav__link">
    ウォークスルー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" title="タスク４          検証フェーズに必要な情報を収集する" class="md-nav__link">
    タスク４          検証フェーズに必要な情報を収集する
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" title="ウォークスルー" class="md-nav__link">
    ウォークスルー
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/skiritan/aws-identity-round-robin-workshop/edit/master/docs/permission-boundaries/build.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="_1">パーミッションバウンダリー ラウンド <small>         構築フェーズ  </small></h1>
<p>Web 管理者に権限を委任する一連のタスクを以下に示します。これらのタスクでは、ポリシーを作成とテストを行います。チームでこのラウンドを行う場合は、タスクを実行する人とテストを行う人に担当をを分けることもできます。 </p>
<h2 id="_2">設定手順</h2>
<p>以下のドロップダウンのいずれかを展開し、指示に従ってください。 (このワークショップが <strong>AWS</strong> イベントか<strong>個人</strong>かによって選択してください)</p>
<details class="info"><summary>AWS 主催のイベント</summary><p><strong>コンソールログイン:</strong> このワークショップに AWS の公式イベントで参加している場合、あなたのチームはアカウントの URL とログイン認証情報を所持している必要があります。AWS SSO を使ってアカウントにログインできるので、この URL を参照しログインします。 </p>
<p>ログイン後、<strong>AWS Account</strong> ボックスをクリックし、その下に表示されている Account ID (アカウント ID) (画像の赤いボックス) をクリックします。<strong>マネジメントコンソール</strong> のリンクが表示されるので、これをクリックしてコンソールに移動します。 </p>
<p><img alt="login-page" src="../images/login.png" /></p>
<p>リージョンが Ohio (us-east-2) に設定されていることを確認します。</p>
<p><strong>CloudFormation:</strong> 以下の CloudFormation スタックを起動して環境を設定します。</p>
<table>
<thead>
<tr>
<th>リージョン</th>
<th>デプロイ</th>
</tr>
</thead>
<tbody>
<tr>
<td>US East 2 (Ohio)</td>
<td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-2#/stacks/new?stackName=Perm-Bound&amp;templateURL=https://s3-us-west-2.amazonaws.com/sa-security-specialist-workshops-us-west-2/identity-workshop/permissionboundary/identity-workshop-web-admins.yaml"><img alt="Deploy permissions boundary round in us-east-2" src="../images/deploy-to-aws.png" /></a></td>
</tr>
</tbody>
</table>
<ol>
<li>上の　<strong>Deploy to AWS</strong> ボタンをクリックします。これにより、テンプレートを実行するコンソールに自動的に移動します。 </li>
<li><strong>テンプレートの指定</strong> セクションで <strong>次へ</strong> をクリックします。</li>
<li><strong>スタックの詳細を指定</strong> セクションで <strong>次へ</strong> をクリックします (スタック名は既に入力されています。入力されていない場合は任意の名前を入力します)。</li>
<li><strong>スタックオプションの設定</strong> セクションで <strong>次へ</strong> をクリックします。</li>
<li>最後に、テンプレートによって <strong>IAM ロールが作成されることを承認</strong> し、<strong>スタックの作成</strong> をクリックします。</li>
</ol>
<p>これによって CloudFormation コンソールに戻ります。ページを更新すると、スタックの作成が開始されることが確認できます。次に進む前に、スタックが <strong>CREATE_COMPLETE</strong> であることを確認してください。</p>
</details>
<details class="info"><summary>個人の AWS アカウントを使用している場合</summary><p>通常どおりアカウントにログインします。</p>
<p><strong>CloudFormation:</strong> 以下の CloudFormation スタックを起動して環境を設定します。</p>
<table>
<thead>
<tr>
<th>リージョン</th>
<th>デプロイ</th>
</tr>
</thead>
<tbody>
<tr>
<td>US East 2 (Ohio)</td>
<td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-2#/stacks/new?stackName=Perm-Bound&amp;templateURL=https://s3-us-west-2.amazonaws.com/sa-security-specialist-workshops-us-west-2/identity-workshop/permissionboundary/identity-workshop-web-admins.yaml"><img alt="Deploy permissions boundary round in us-east-2" src="../images/deploy-to-aws.png" /></a></td>
</tr>
</tbody>
</table>
<ol>
<li>上の　<strong>Deploy to AWS</strong> ボタンをクリックします。これにより、テンプレートを実行するコンソールに自動的に移動します。 </li>
<li><strong>テンプレートの指定</strong> セクションで <strong>次へ</strong> をクリックします。</li>
<li><strong>スタックの詳細を指定</strong> セクションで <strong>次へ</strong> をクリックします (スタック名は既に入力されています。入力されていない場合は任意の名前を入力します)。</li>
<li><strong>スタックオプションの設定</strong> セクションで <strong>次へ</strong> をクリックします。</li>
<li>最後に、テンプレートによって <strong>IAM ロールが作成されることを承認</strong> し、<strong>スタックの作成</strong> をクリックします。</li>
</ol>
<p>これによって CloudFormation コンソールに戻ります。ページを更新すると、スタックの作成が開始されることが確認できます。次に進む前に、スタックが <strong>CREATE_COMPLETE</strong> であることを確認してください。</p>
</details>
<h2 id="1-iam-lambda-iam-iam">タスク１ <small>マネージドポリシー、IAM ロール、および Lambda 機能を作成する権限を持つ IAM ユーザー、IAM ポリシーを作成する</small></h2>
<p>IAM ポリシーを構築して、Web 管理者がマネージドポリシー、IAM ロール、および Lambda 機能を作成できるようにします。また、Web 管理者自身が作成したポリシー、ロール、Lambda 機能も編集できるようにします。 </p>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>各タスクで提供されているヒントを確認する際には、アカウント ID の追加、リソース制限を正しく使用してください。また必要に応じて、指定されたリージョンを変更してください。この項目のいずれかが間違っていると、ポリシーに問題が発生する可能性があります</p>
</div>
<h3 id="_3">ウォークスルー</h3>
<ul>
<li><a href="https://console.aws.amazon.com/iam/home">IAM コンソール</a> に移動します。  </li>
<li>IAM コンソールの最初の画面 (ダッシュボード画面) には、<strong>IAM ユーザのサインインリンク</strong>が表示されます。このリンクをコピーしてください。この URL にはアカウント ID が含まれており、このアカウントを他のチームに渡して検証フェーズを行う際に必要になります。<br />
<img alt="image1" src="../images/iam-dashboard.png" /></li>
<li>左側のメニューで <strong>ユーザー</strong> をクリックし、<strong>ユーザを追加</strong>をクリックします。<code>**webadmin**</code> という名前の新しい IAM ユーザーを作成します。<strong>AWS</strong> <strong>マネジメントコンソールへのアクセス</strong> のチェックボックスをオンにしてから、パスワードを自動生成するか、カスタムパスワードを設定します。<strong>パスワードのリセットが必要</strong> のチェックボックスを<strong>オフ</strong>にします。次のアクセス許可の設定で、AWS マネージドポリシー <strong>IAMReadOnlyAccess</strong> と <strong>AWSLambdaReadOnlyAccess</strong> をユーザーに付与します。<br />
<img alt="image1" src="../images/create-iam-user.png" /></li>
<li>次に、左側のメニューで <strong>ポリシー</strong> をクリックします。以下のヒントに基づいて、新しい IAM ポリシーを作成します。作成した <strong><code>webadmin</code></strong> ユーザーにこのポリシーも付与します。  </li>
</ul>
<div class="admonition hint">
<p class="admonition-title">ヒント</p>
<p><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html">IAM ID</a>: IAM ポリシーでは、名前またはパス指定のリソース制限を使用します。以下の項目"Resource"にある「<strong>????</strong>」は、リソース制限として有効なものに置き換える必要があります。既存のリソース (ロール、Lambda 関数) を調べて、Web 管理者が所有する既存のリソースへのアクセス権がポリシーによって付与されることを確認します。「<strong>????</strong>」を置き換えることがこのラウンドの鍵となります。 </p>
</div>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;CreateCustomerManagedPolicies&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;iam:CreatePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeletePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:CreatePolicyVersion&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeletePolicyVersion&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:SetDefaultPolicyVersion&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:policy/????&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;CreateRoles&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;iam:CreateRole&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:UpdateRole&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeleteRole&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:AttachRolePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DetachRolePolicy&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:role/????&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;LambdaFullAccesswithResourceRestrictions&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;lambda:*&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:lambda:us-east-2:ACCOUNT_ID:function:????&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;PassRoletoLambda&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;iam:PassRole&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:role/????&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Condition&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;StringLikeIfExists&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;iam:PassedToService&quot;</span><span class="p">:</span> <span class="s2">&quot;lambda.amazonaws.com&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;AdditionalPermissionsforLambda&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;kms:ListAliases&quot;</span><span class="p">,</span> <span class="s2">&quot;logs:Describe*&quot;</span><span class="p">,</span> <span class="s2">&quot;logs:ListTagsLogGroup&quot;</span><span class="p">,</span> <span class="s2">&quot;logs:FilterLogEvents&quot;</span><span class="p">,</span> <span class="s2">&quot;logs:GetLogEvents&quot;</span><span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>As you complete the following tests, keep in mind the resource restriction you set up in the policy above (<strong>????</strong>). Use the <strong>IAM users sign-in link</strong> you gathered earlier to login: 
以下の動作確認をする際には、上記のポリシーで設定したリソース制限に注意してください(<strong>?????部分</strong>)。         ログインするには、前にコピーしておいた <strong>IAM</strong> <strong>ユーザーのサインインリンク</strong>を使用します。  </p>
<ul>
<li>別のブラウザを使用して　<strong>webadmin</strong> IAM ユーザーでログインし、ユーザーがポリシーを作成できることを確認します。 （この時点ではポリシーの内容は重要ではありません）</li>
<li>リソース制限に従ってロールを作成できることを確認します。このロールは信頼できるエンティティとして Lambda を使用する必要があります (このロールを使用して次のタスクをテストします)。  </li>
<li>最後に、先ほど作成したロールを付与した Lambda 関数を作成できることを確認します。</li>
</ul>
<div class="admonition question">
<p class="admonition-title">質問</p>
<ul>
<li>ここでリソース制限を使用するのはなぜですか？</li>
<li>リソース制限を行うには、命名とパス指定の 2 つの方法があります。AWS コンソールと CLI の両方を使用してポリシーを作成できるオプションはどちらですか？  </li>
</ul>
</div>
<h2 id="2">タスク２ <small>パーミッションバウンダリーを作成する</small></h2>
<p>Web 管理者は、IAM ポリシー、IAM ロール、および Lambda 関数を作成できますが、作成できるロールのアクセス権限は制限する必要があります。もし制限しない場合、Web 管理者が完全な管理者権限を持つポリシーを新しく作成してロールに付与し、そのロールを Lambda 関数に渡して広範なアクセス権を付与することができてしまいます （故意か過失かにかかわらず）。ロールの有効なアクセス権に対して制限を設定するには、パーミッションバウンダリーを使用します。パーミッションバウンダリーを使って、Web 管理者が作成するロールに対して、以下の <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_evaluation-logic.html">有効なアクセス権</a> のみ許可できるよう制限する必要があります。</p>
<blockquote>
<p>i. ロググループの作成 (ただし、他のロググループを上書きすることはできません)</p>
<p>ii. ログストリームの作成とログの書き込み  </p>
<p>iii. 名前が <code>"web-admins-"</code> で始まり <code>"-data"</code>で終わる S3 バケットのオブジェクトのリスト取得</p>
</blockquote>
<h3 id="_4">ウォークスルー  :</h3>
<ul>
<li>Web 管理者向けのパーミッションバウンダリーとして使用する、新しい IAM ポリシーを作成します。  </li>
</ul>
<div class="admonition hint">
<p class="admonition-title">ヒント</p>
<p><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html">IAM ID</a>: 以下の項目"Resource"にある「<strong>????</strong>」は、リソース制限として有効なものに置き換える必要があります。</p>
</div>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;CreateLogGroup&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;logs:CreateLogGroup&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:logs:us-east-2:ACCOUNT_ID:*&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;CreateLogStreamandEvents&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;logs:CreateLogStream&quot;</span><span class="p">,</span>
                <span class="s2">&quot;logs:PutLogEvents&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:logs:us-east-2:ACCOUNT_ID:log-group:/aws/lambda/????:*&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;AllowedS3GetObject&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;s3:List*&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:s3:::web-admins-ACCOUNT_ID-*&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<p>ポリシーの名前は <strong><code>webadminpermissionboundary</code></strong> とします。</p>
<div class="admonition question">
<p class="admonition-title">質問</p>
<ul>
<li>このパーミッションバウンダリーを適用する対象は何ですか？  </li>
<li>パーミッションバウンダリーと標準の IAM ポリシーの違いは何でしょうか？</li>
<li>現時点で、このパーミッションバウンダリーはどのようにしてテストできますか？  </li>
</ul>
</div>
<h2 id="3-web">タスク３ <small>Web 管理者向けのアクセス権のポリシーを更新して、パーミッションバウンダリーを組み込む</small></h2>
<h3 id="_5">ウォークスルー</h3>
<p>先ほど作成したパーミッションバウンダリーを参照するポリシーを作成します。新しいポリシーの作成には、以下の例をそのまま使用することをお勧めします。</p>
<p>以下のポリシーには、これまで扱わなかった２つのセクションが追加されていることに注意してください (最後の 2 つのセクション)。このセクションは、アクセス権のポリシーやパーミッションバウンダリー自体の変更、削除を拒否することを目的としています。</p>
<div class="admonition hint">
<p class="admonition-title">ヒント</p>
<p><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_boundaries.html">パーミッションバウンダリー</a>: 以下の項目"Resource"にある「<strong>????</strong>」は、リソース制限として有効なものに置き換える必要があります。</p>
</div>
<div class="codehilite"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;CreateCustomerManagedPolicies&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;iam:CreatePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeletePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:CreatePolicyVersion&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeletePolicyVersion&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:SetDefaultPolicyVersion&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:policy/????&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
              <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;RoleandPolicyActionswithnoPermissionBoundarySupport&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;iam:UpdateRole&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;iam:DeleteRole&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:role/????&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;CreateRoles&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;iam:CreateRole&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:AttachRolePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DetachRolePolicy&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:role/????&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Condition&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;StringEquals&quot;</span><span class="p">:</span> 
                <span class="p">{</span><span class="nt">&quot;iam:PermissionsBoundary&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:policy/webadminpermissionboundary&quot;</span><span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;LambdaFullAccesswithResourceRestrictions&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;lambda:*&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:lambda:us-east-2:ACCOUNT_ID:function:????&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;PassRoletoLambda&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;iam:PassRole&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:role/????&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Condition&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;StringLikeIfExists&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="nt">&quot;iam:PassedToService&quot;</span><span class="p">:</span> <span class="s2">&quot;lambda.amazonaws.com&quot;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;AdditionalPermissionsforLambda&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span>   <span class="p">[</span><span class="s2">&quot;kms:ListAliases&quot;</span><span class="p">,</span> <span class="s2">&quot;logs:Describe*&quot;</span><span class="p">,</span> <span class="s2">&quot;logs:ListTagsLogGroup&quot;</span><span class="p">,</span> <span class="s2">&quot;logs:FilterLogEvents&quot;</span><span class="p">,</span> <span class="s2">&quot;logs:GetLogEvents&quot;</span><span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;DenyPermissionBoundaryandPolicyDeleteModify&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Deny&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;iam:CreatePolicyVersion&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeletePolicy&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:DeletePolicyVersion&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:SetDefaultPolicyVersion&quot;</span>
            <span class="p">],</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:policy/webadminpermissionboundary&quot;</span><span class="p">,</span>
                <span class="s2">&quot;arn:aws:iam::ACCOUNT_ID:policy/webadminpermissionpolicy&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;DenyRolePermissionBoundaryDelete&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Deny&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Action&quot;</span><span class="p">:</span> <span class="s2">&quot;iam:DeleteRolePermissionsBoundary&quot;</span><span class="p">,</span>
            <span class="nt">&quot;Resource&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>新しいポリシーに  <strong><code>webadminpermissionpolicy</code></strong> という名前を付け、webadmin ユーザーに関連付けます。以前に追加したテスト用のポリシーは削除します 。</li>
<li>作業が完了すると、<strong>webadmin</strong> ユーザーには、webadminpermissionpolicy、IAMReadOnlyAccess、および AWSLambdaReadOnlyAccess の 3 つのポリシーのみが適用されている状態になります。</li>
<li><strong>webadmin</strong> としてコンソールにログインしたブラウザから再度、ユーザーがポリシーの作成できることを確認し、ロールの作成 (ロールにアクセス権のポリシーとパーミッションバウンダリーの両方を割り当てる)、およびそのロールを渡す Lambda 関数を作成できることを確認します。リソース制限に注意してください。</li>
</ul>
<div class="admonition question">
<p class="admonition-title">質問</p>
<ul>
<li>
<p>DeletePolicy アクションの拒否を追加したのはなぜですか？</p>
</li>
<li>
<p>このパーミッションバウンダリー設定を削除する機能を拒否しなかった場合どうなりますか？</p>
</li>
</ul>
</div>
<p>​   </p>
<h2 id="4">タスク４ <small>         <strong>検証</strong>フェーズに必要な情報を収集する</small></h2>
<h3 id="_6">ウォークスルー</h3>
<p>Web 管理者用の IAM ユーザーが設定できたので、この情報を<strong>検証タスク</strong>を実施する別のチームに渡します。設定に関する情報をまとめて、その情報を次のチームに渡してください。</p>
<p>他のチームに渡す必要のある情報は以下のとおりです。 推奨される名前で設定した場合、下記のフォームがそのまま利用できます。また、あなたのチームも他のチームからフォームを入手し、あなたも<strong>検証フェーズ</strong>に取り組むことができるようにしてください。</p>
<ul>
<li>IAM ユーザのサインインリンク: <strong>https://Account_ID.signin.aws.amazon.com/console</strong></li>
<li>IAM ユーザ名: <strong>webadmin</strong></li>
<li>IAM ユーザ パスワード:    </li>
<li>リソース制限 ID :   </li>
<li>パーミッションバウンダリー名: <strong>webadminpermissionboundary</strong></li>
<li>パーミッションバウンダリーのポリシー名: <strong>webadminpermissionpolicy</strong></li>
</ul>
<div class="admonition hint">
<p class="admonition-title">ヒント</p>
<p>情報を提供してくれたチームに、あなたのチームの情報を配布しないようすると、チーム数が奇数の場合でも、配布先がないチームを出さないようにすることができます。</p>
</div>
<p>以上のタスクを完了したら、<strong>検証フェーズ</strong>に進んでください。</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../" title="シナリオ" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                シナリオ
              </span>
            </div>
          </a>
        
        
          <a href="../verify/" title="検証フェーズ" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                検証フェーズ
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2019, Amazon Web Services, Inc. or its affiliates. All rights reserved.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://awssecworkshops.com" class="md-footer-social__link fa fa-home"></a>
    
      <a href="https://aws.amazon.com/security/" class="md-footer-social__link fa fa-shield"></a>
    
      <a href="https://twitter.com/awssecurityinfo?lang=en" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://aws.amazon.com/blogs/security/" class="md-footer-social__link fa fa-rss"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.d9aa80ab.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>